<!DOCTYPE html>
<html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="./style.css" type="text/css">
        <title>Регистрация</title>
</head>
<body>
<form onsubmit="registration()">
    <h2>Выполнил студент Бедак Иван</h2>
    <h1>
        Регистрация нового пользователя
    </h1>
    <table class='big' width="100%" cellpadding="10">
        <tr>
            <th>
    <table width="100%" cellpadding="0">
        <tr>
            <th>
                <p>Имя
                <br><input type="text" id="name" required></p>
            </th>
            <th>
                <p>Пароль
                <br><input type="password" id="pass" required></p>
            </th>
        </tr>
        <tr>
            <th>
                <p>Фамилия
                <br><input type="text" id="surname" required></p>
            </th>
            <th>
                <p>Подтвердите пароль
                <br><input type="password" id="pass_check" required></p>
            </th>
        </tr>
        <tr>
            <th>
                <p>Почта email
                <br><input type="email" id="email" required></p>
            </th>
            <th>
                <p>Дата рождения
                <br><input type="date" id="birthdate" required></p>
            </th>
        </tr>
        <tr>
            <th>
                <p>Пол
                <br><select name="pol" id="pol" required>
                    <option value="1">Мужской</option>
                    <option value="2">Женский</option>
                </select>
                </p>
            </th>
        </tr>
        <tr>
            <th>
                <p><input type="submit" value="Регистрация"></p>
            </th>
        </tr>
    </table>
    <script>
        function registration() {
  			name = document.getElementById('name').value;
            surname = document.getElementById('surname').value;
            password1 = document.getElementById('pass').value;
            password2 = document.getElementById('pass_check').value;
            male = document.getElementById('pol').value;
            email = document.getElementById('email').value;
            birthdate = document.getElementById('birthdate').value;

            if (password1 == password2){

                user = JSON.stringify({'name': name, 'surname': surname, 'pass': pass, 'male': male, 'email': email, 'birthdate': birthdate});

                localStorage.setItem('name', '');
                localStorage.setItem('surname', '');
                localStorage.setItem('pass', '');
                localStorage.setItem('pol', '');
                localStorage.setItem('email', '');
                localStorage.setItem('birthdate', '');
                localStorage.setItem('borderColor', '');
                localStorage.setItem(email, user)

                out = `${name} ${surname}, Вы успешно зарегистрировались на нашем сервисе!\nВаш логин для авторизации - ${email}. Дата вашего рождения - ${birthdate}`;
                alert(out);

            } else {
                localStorage.setItem('name', name);
                localStorage.setItem('surname', surname);
                localStorage.setItem('pass', password1);
                localStorage.setItem('pol', male);
                localStorage.setItem('email', email);
                localStorage.setItem('birthdate', birthdate);
                localStorage.setItem('borderColor', 'red');

                alert('Пароли не совпадают');
            }
		}
        document.getElementById('name').value = localStorage.getItem('name');
        document.getElementById('surname').value = localStorage.getItem('surname');
        document.getElementById('pass').value = localStorage.getItem('pass');
        document.getElementById('pol').value = localStorage.getItem('pol');
        document.getElementById('email').value = localStorage.getItem('email');
        document.getElementById('birthdate').value = localStorage.getItem('birthdate');
        document.getElementById('pass_check').style.borderColor = localStorage.getItem('borderColor');
    </script>
</form>
</th>
<th class='ans'>
<div class='search'>
    <p> Логин
        <br><input type='email' id='login_search'>
        <input type='button' id='search' value='Найти'>
    </p>
    <p id='result'>

    </p>
</div>
</th>
</tr>
</table>
<script>
    function search_login(){
        login = document.getElementById('login_search').value;

        info = localStorage.getItem(login);
        if (info !== null){
            user = JSON.parse(info);

            s = ''
            s += '<br>Имя - ' + user.name + '\n\t';
            s += '<br>Фамилия - ' + user.surname + '\n\t';
            s += '<br>Email - ' + user.email + '\n\t';
            s += '<br>Дата рождения - ' + user.birthdate + '\n';

            document.getElementById('result').innerHTML = s;
        } else  {
            alert('Такого пользователя не существует');
        }
    }

    search.onclick = search_login;
</script>
</body>
</html>